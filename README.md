---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->



# rabinoffmmmr

<!-- badges: start -->
<!-- badges: end -->

The goal of rabinoffmmmr is to provide an interface for building and employing media mix models that more closely resembles building and employing standard statistical and machine learning models. Model parameters will be stored in an initial model spec object of class `mmmr`, which then can be used with `fit`, `predict`, and `coef`. Plotting and reporting functions will be added.

## Installation

You can install the development version of rabinoffmmmr like so:

``` r
## NOT RUN
#devtools::install_github("DerksenRabinoff/rabinoffmmmr")
```

## Example

Attaching rabinoffmmmr and loading data


```
#> Rows: 212 Columns: 11
#> ── Column specification ───────────────────────────────────────────────────────────────────────────────
#> Delimiter: ","
#> dbl  (10): Sales, TV Spend, Radio Spend, Online Video Spend, Social Media Spend, Search Ads Spend, ...
#> date  (1): Week Starting
#> 
#> ℹ Use `spec()` to retrieve the full column specification for this data.
#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

The mmm needs to know the dependent variable, the date variable, and which channels need diminishing returns and adstocking calculated.


```r
## The data has the following columns
dependent <- "Sales"
date <- "Week Starting"

## Let's suppose the following are subject to diminishing returns effects
saturation_vars <- c("TV Spend", "Radio Spend", "Online Video Spend", "Social Media Spend")

## Let's suppose the following are subject to adstocking effects (retention in consumer memory)
adstocking_vars <- c("TV Spend", "Radio Spend", "Social Media Spend", "Search Ads Spend", "Direct Mail Spend")

## The predictors will include all variables other than the date and dependent variable
predictor_vars <- setdiff(names(data), c(dependent, date))

## Make sure the date variable is of type "Date" and that every row has a date
data[[date]] <- lubridate::as_date(data[[date]], format = "%B %d, %Y")
data %<>% dplyr::filter(!is.na(`Week Starting`))
data %>% knitr::kable()
```



|Week Starting |         Sales| TV Spend| Radio Spend| Online Video Spend| Social Media Spend| Search Ads Spend| Direct Mail Spend| black friday sale| xmas| adverse event|
|:-------------|-------------:|--------:|-----------:|------------------:|------------------:|----------------:|-----------------:|-----------------:|----:|-------------:|
|2019-01-28    |   152950.2929|     5678|        2394|                 70|                276|              246|              1484|                 0|    0|             0|
|2019-02-04    |    76461.5593|     2716|           0|                 94|                236|              376|               224|                 0|    0|             0|
|2019-02-11    |   183703.3741|     5166|        2278|                179|                438|              439|               802|                 0|    0|             0|
|2019-02-18    |   110030.7940|     4869|           0|                139|                276|              450|               572|                 0|    0|             0|
|2019-02-25    |   194915.2262|     4097|        2471|                 82|                325|              308|              1852|                 0|    0|             0|
|2019-03-04    |   119382.1965|        0|           0|                 66|                264|              242|               550|                 0|    0|             0|
|2019-03-11    |   101402.6037|     1645|           0|                 76|                187|              374|               903|                 0|    0|             0|
|2019-03-18    |    88853.8145|     1908|           0|                 72|                344|              265|               674|                 0|    0|             0|
|2019-03-25    |    94295.8177|     1601|           0|                 71|                232|              308|              5787|                 0|    0|             0|
|2019-04-01    |    92807.6945|     3621|           0|                 73|                350|              671|              1249|                 0|    0|             0|
|2019-04-08    |    69981.4506|     2726|           0|                 67|                237|              160|               755|                 0|    0|             0|
|2019-04-15    |   138227.3011|     3247|        2128|                 78|                246|              404|              2022|                 0|    0|             0|
|2019-04-22    |    36601.2193|     2896|           0|                 32|                399|              216|               910|                 0|    0|             0|
|2019-04-29    |    28025.8729|     3498|           0|                 84|                408|              244|               419|                 0|    0|             0|
|2019-05-06    |   104720.2948|     3995|        2004|                 56|                401|              204|               696|                 0|    0|             0|
|2019-05-13    |    57985.6078|     4621|           0|                 47|                800|              740|               815|                 0|    0|             0|
|2019-05-20    |    62256.5171|     2952|        2102|                 59|                602|              520|               274|                 0|    0|             0|
|2019-05-27    |    92662.4274|     3554|           0|                 61|                574|              339|               330|                 0|    0|             0|
|2019-06-03    |   156221.1744|     2843|        2490|                 45|                557|              189|              1049|                 0|    0|             0|
|2019-06-10    |    68552.5615|        0|           0|                 63|                375|               35|              3180|                 0|    0|             0|
|2019-06-17    |    61420.8819|     2821|           0|                 61|                311|               79|              3420|                 0|    0|             0|
|2019-06-24    |    74439.7690|     4163|           0|                 41|                438|               43|               538|                 0|    0|             0|
|2019-07-01    |   836238.5341|     3737|        2595|                 59|                746|               30|              4480|                 0|    0|             0|
|2019-07-08    |   190398.4556|     3708|        3447|                 52|                388|               43|               693|                 0|    0|             0|
|2019-07-15    |   104195.8804|     2566|           0|                 43|                732|               34|               828|                 0|    0|             0|
|2019-07-22    |   163733.1180|     2698|        2315|                 49|                350|               38|              3726|                 0|    0|             0|
|2019-07-29    |   102138.4089|     3086|           0|                174|                401|               29|              1703|                 0|    0|             0|
|2019-08-05    |   103760.1228|     2176|           0|                218|                553|               49|               369|                 0|    0|             0|
|2019-08-12    |   178054.9089|     3254|        3281|                160|                557|               37|               687|                 0|    0|             0|
|2019-08-19    |   105071.3225|     2964|           0|                228|                606|               34|               485|                 0|    0|             0|
|2019-08-26    |   157332.8077|     3220|        3292|                212|                832|               70|               380|                 0|    0|             0|
|2019-09-02    |  1536335.7040|     3507|           0|                201|                538|               50|               386|                 0|    0|             0|
|2019-09-09    |   144683.3213|     3820|        2045|                220|                490|               28|               829|                 0|    0|             0|
|2019-09-16    |    61504.4589|     2412|           0|                  7|                416|               28|               495|                 0|    0|             0|
|2019-09-23    |    62251.5304|     2543|           0|                  0|                502|               24|               600|                 0|    0|             0|
|2019-09-30    |   153310.7267|     3387|        1563|                  0|                233|               31|              2224|                 0|    0|             0|
|2019-10-07    |    73439.6048|      845|           0|                  0|                161|               23|               110|                 0|    0|             0|
|2019-10-14    |  -504139.6883|     1255|           0|                  0|                162|               25|              1409|                 0|    0|             0|
|2019-10-21    |   139001.2444|     3635|        2259|                424|                265|               26|               668|                 0|    0|             0|
|2019-10-28    |    64545.9026|     3005|           0|                403|                415|               29|                74|                 0|    0|             0|
|2019-11-04    |    87708.3625|     4473|           0|                183|                324|               27|              6347|                 0|    0|             0|
|2019-11-11    |   611561.0757|     3237|           0|                171|                402|               31|              2376|                 0|    0|             0|
|2019-11-18    |   122640.5741|     4465|           0|                201|                463|               28|               408|                 0|    0|             0|
|2019-11-25    |   232401.8039|     6034|        3241|                185|                709|               46|              1631|                 1|    0|             0|
|2019-12-02    |    98316.1218|     1046|           0|                106|                479|               49|               113|                 0|    0|             0|
|2019-12-09    |   142258.5855|     5122|        1718|                 20|                224|               40|              5645|                 0|    0|             0|
|2019-12-16    |    48265.1695|     1286|           0|                 19|                239|               41|              1353|                 0|    0|             0|
|2019-12-23    |   128981.0833|     5461|        2321|                  9|                295|               21|               325|                 0|    0|             0|
|2019-12-30    |   174528.9272|     3474|        2151|                349|                552|               28|               103|                 0|    0|             0|
|2020-01-06    |   125462.7828|     2521|           0|                506|                716|               65|              2789|                 0|    0|             0|
|2020-01-13    |   205067.9674|     3542|        2104|                392|                890|               56|               606|                 0|    0|             0|
|2020-01-20    |   115467.9559|     3980|           0|                 47|                463|               33|              3041|                 0|    0|             0|
|2020-01-27    |   160796.9974|     2315|        1448|                205|                143|               18|              1096|                 0|    0|             0|
|2020-02-03    |    84420.2057|     2773|           0|                223|                197|               30|               904|                 0|    0|             0|
|2020-02-10    |   181851.1876|     5495|        2445|                200|                389|               29|               435|                 0|    0|             0|
|2020-02-17    |   106973.0908|     3268|           0|                 61|                290|               29|               387|                 0|    0|             0|
|2020-02-24    |   202646.7554|     4252|        2164|                 58|                297|               45|               351|                 0|    0|             0|
|2020-03-02    |   114258.6605|     2067|           0|                 36|                373|               33|              2028|                 0|    0|             0|
|2020-03-09    |   204317.7982|     3120|        2014|                 22|                295|               12|                90|                 0|    0|             0|
|2020-03-16    |    98864.5126|     1992|           0|                 35|                284|                7|                 0|                 0|    0|             0|
|2020-03-23    |    57013.9320|        0|           0|                 23|                 49|               65|                 0|                 0|    0|             0|
|2020-03-30    |    28963.9662|        0|           0|                 34|                  0|               77|                 0|                 0|    0|             0|
|2020-04-06    |    10092.4572|        0|           0|                 28|                 18|               55|                 0|                 0|    0|             0|
|2020-04-13    |      131.8272|        0|           0|                 31|                126|               56|               280|                 0|    0|             0|
|2020-04-20    |   -10351.5344|        0|           0|                 34|                154|               19|               545|                 0|    0|             0|
|2020-04-27    |  -127961.6848|        0|           0|                 49|                154|               13|               124|                 0|    0|             1|
|2020-05-04    |  -107218.6531|        0|           0|                 58|                239|               77|               845|                 0|    0|             1|
|2020-05-11    |   -93211.3828|        0|           0|                 62|                156|               75|                 0|                 0|    0|             1|
|2020-05-18    |   -77677.0321|        0|           0|                 56|                159|               71|               110|                 0|    0|             0|
|2020-05-25    |    47124.6895|        0|           0|                 91|                276|               39|               485|                 0|    0|             0|
|2020-06-01    |    38052.3852|        0|           0|                 76|                201|               66|               454|                 0|    0|             0|
|2020-06-08    |    24897.2620|        0|           0|                 65|                236|               63|               416|                 0|    0|             0|
|2020-06-15    |    18171.6086|        0|           0|                118|                282|               46|               343|                 0|    0|             0|
|2020-06-22    |    21921.8089|        0|           0|                108|                213|               31|              1373|                 0|    0|             0|
|2020-06-29    |    53836.5202|     1329|           0|                101|                261|               12|              1982|                 0|    0|             0|
|2020-07-06    |    50255.1192|     1201|           0|                 46|                180|                1|                11|                 0|    0|             0|
|2020-07-13    |    43321.8595|     1561|           0|                 46|                142|                2|               768|                 0|    0|             0|
|2020-07-20    |    41276.2655|     1252|           0|                 49|                133|                1|               709|                 0|    0|             0|
|2020-07-27    |    46065.0659|     1193|           0|                 72|                 95|                0|              2641|                 0|    0|             0|
|2020-08-03    |    62584.7655|     1102|           0|                 95|                102|                4|              2322|                 0|    0|             0|
|2020-08-10    |    61943.2818|      773|           0|                 68|                160|                6|               416|                 0|    0|             0|
|2020-08-17    |   142413.7993|      943|        1905|                143|                102|                6|              1919|                 0|    0|             0|
|2020-08-24    |    65131.0763|      912|           0|                 91|                155|               15|               713|                 0|    0|             0|
|2020-08-31    |   116516.1067|     1185|        1315|                 48|                252|               18|               233|                 0|    0|             0|
|2020-09-07    |  1244871.9902|      952|           0|                 66|                190|                5|               263|                 0|    0|             0|
|2020-09-14    |   116829.8262|     1520|        1560|                 45|                102|                3|              1957|                 0|    0|             0|
|2020-09-21    |    34029.5541|        0|           0|                 60|                113|                5|               531|                 0|    0|             0|
|2020-09-28    |    38412.0338|     1006|           0|                 34|                 77|               15|               531|                 0|    0|             0|
|2020-10-05    |    48632.9230|     1524|           0|                 29|                 85|               15|               249|                 0|    0|             0|
|2020-10-12    |  -424490.6291|     2378|        2499|                 28|                 80|                5|              1022|                 0|    0|             0|
|2020-10-19    |   138954.0665|     2090|        2384|                 23|                135|               27|               747|                 0|    0|             0|
|2020-10-26    |    54284.8700|     2071|           0|                 37|                139|               50|              1559|                 0|    0|             0|
|2020-11-02    |    51207.7556|     1794|           0|                 25|                 73|               58|              2346|                 0|    0|             0|
|2020-11-09    |    76781.1707|     2149|           0|                 66|                411|               65|              1071|                 0|    0|             0|
|2020-11-16    |    90569.6868|     2638|           0|                 56|                318|              101|               354|                 0|    0|             0|
|2020-11-23    |   213656.5300|     4810|        2335|                105|                447|               83|               226|                 1|    0|             0|
|2020-11-30    |    74977.5762|     2230|           0|                107|                413|               69|              1087|                 0|    0|             0|
|2020-12-07    |    50026.6472|        0|           0|                 60|                302|               63|              2137|                 0|    0|             0|
|2020-12-14    |    31825.0071|        0|           0|                 63|                340|               34|              2320|                 0|    0|             0|
|2020-12-21    |   -23050.9688|        0|           0|                 34|                262|               51|               423|                 0|    1|             0|
|2020-12-28    |  1392142.1370|        0|           0|                 32|                374|              101|              1076|                 0|    0|             0|
|2021-01-04    |    68246.1255|        0|           0|                 18|                197|              112|                51|                 0|    0|             0|
|2021-01-11    |    69771.7381|        0|           0|                 21|                257|               54|               324|                 0|    0|             0|
|2021-01-18    |    70469.2926|        0|           0|                 19|                217|               36|              1747|                 0|    0|             0|
|2021-01-25    |    69039.5630|        0|           0|                 81|                283|               34|              1364|                 0|    0|             0|
|2021-02-01    |    70208.2339|        0|           0|                 80|                220|               65|              1141|                 0|    0|             0|
|2021-02-08    |   174868.7477|        0|        2283|                 61|                289|               58|               692|                 0|    0|             0|
|2021-02-15    |   -13123.8046|        0|           0|                 59|                151|               84|               456|                 0|    0|             1|
|2021-02-22    |    98190.5735|        0|           0|                 69|                304|               45|              1291|                 0|    0|             0|
|2021-03-01    |   110785.7441|     1037|           0|                 40|                217|               45|               799|                 0|    0|             0|
|2021-03-08    |   112504.5373|     1716|           0|                 56|                243|               18|              1297|                 0|    0|             0|
|2021-03-15    |    97509.5607|     1338|           0|                 38|                255|               26|              2039|                 0|    0|             0|
|2021-03-22    |    70340.1840|        0|           0|                 51|                156|               23|               422|                 0|    0|             0|
|2021-03-29    |    52101.4827|        0|           0|                 35|                 77|               10|               841|                 0|    0|             0|
|2021-04-05    |    32444.2449|        0|           0|                 58|                102|               10|               387|                 0|    0|             0|
|2021-04-12    |    19431.0000|        0|           0|                 52|                145|               19|               513|                 0|    0|             0|
|2021-04-19    |    87315.9179|     2475|        3165|                 37|                122|               21|               766|                 0|    0|             0|
|2021-04-26    |     6311.3313|        0|           0|                 55|                288|               37|              1589|                 0|    0|             0|
|2021-05-03    |     4484.2182|        0|           0|                101|                302|               51|               348|                 0|    0|             0|
|2021-05-10    |    23770.0053|     2092|           0|                167|                280|               34|               197|                 0|    0|             0|
|2021-05-17    |    54876.6281|     2330|           0|                166|                316|               61|              2883|                 0|    0|             0|
|2021-05-24    |    65068.0342|     1890|        3048|                293|                539|              112|               770|                 0|    0|             0|
|2021-05-31    |    72952.4003|        0|           0|                 93|                396|               54|               335|                 0|    0|             0|
|2021-06-07    |   120446.2725|     1595|        3118|                 54|                135|               56|               145|                 0|    0|             0|
|2021-06-14    |    33859.0686|        0|           0|                 61|                127|                6|              1930|                 0|    0|             0|
|2021-06-21    |    39473.2974|     2366|           0|                 50|                250|               57|              1798|                 0|    0|             0|
|2021-06-28    |   145229.0761|     1498|        4480|                 51|                263|               48|              5116|                 0|    0|             0|
|2021-07-05    |   162688.1323|     2186|        3422|                 66|                261|               43|                20|                 0|    0|             0|
|2021-07-12    |    87008.1251|     1839|           0|                 36|                370|               30|              2183|                 0|    0|             0|
|2021-07-19    |   143072.4965|     1605|        3873|                 56|                255|               13|              1116|                 0|    0|             0|
|2021-07-26    |    73287.3621|     1322|           0|                 39|                182|               36|              1115|                 0|    0|             0|
|2021-08-02    |    87622.1039|     1742|           0|                 64|                289|               33|              2327|                 0|    0|             0|
|2021-08-09    |    81973.6887|     1809|           0|                 61|                207|               26|               250|                 0|    0|             0|
|2021-08-16    |    79662.7578|     1693|           0|                 68|                232|                4|              1258|                 0|    0|             0|
|2021-08-23    |    76409.7959|     1924|           0|                 75|                253|                7|               912|                 0|    0|             0|
|2021-08-30    |   134942.4028|     2305|        3280|                 45|                310|               36|               969|                 0|    0|             0|
|2021-09-06    |  1357200.8288|      863|           0|                 25|                262|               23|               615|                 0|    0|             0|
|2021-09-13    |    54381.5119|     1983|           0|                 30|                285|               23|               980|                 0|    0|             0|
|2021-09-20    |    49148.7626|        0|           0|                 35|                257|                5|              1829|                 0|    0|             0|
|2021-09-27    |    55016.6174|     1970|           0|                 33|                233|               45|               572|                 0|    0|             0|
|2021-10-04    |    75341.6083|     1949|           0|                 34|                272|               32|              1392|                 0|    0|             0|
|2021-10-11    |  -483877.4682|     2447|         791|                 40|                273|               15|              3986|                 0|    0|             0|
|2021-10-18    |   171571.6681|     2271|        1018|                 33|                252|               25|              2869|                 0|    0|             0|
|2021-10-25    |   162518.3637|     2062|         782|                 38|                338|               60|               548|                 0|    0|             0|
|2021-11-01    |   150493.3251|     3028|        1052|                 45|                352|               39|                38|                 0|    0|             0|
|2021-11-08    |   184031.0873|     2530|        4526|                 40|                457|               28|               733|                 0|    0|             0|
|2021-11-15    |   180818.1999|     2529|        4135|                 48|                474|               42|               680|                 0|    0|             0|
|2021-11-22    |   248018.9172|     3579|        4158|                 56|                675|               49|              2822|                 1|    0|             0|
|2021-11-29    |   173875.5265|     1873|         736|                 37|                343|               21|               651|                 0|    0|             0|
|2021-12-06    |   141377.8065|     2522|        1056|                 28|                228|                8|              1593|                 0|    0|             0|
|2021-12-13    |   115069.1277|     1863|        1179|                 29|                257|               13|              1160|                 0|    0|             0|
|2021-12-20    |    66152.7533|        0|        1015|                 18|                277|               22|              4185|                 0|    1|             0|
|2021-12-27    |  1541977.5890|     2855|         906|                 25|                375|               18|              1529|                 0|    0|             0|
|2022-01-03    |   174424.6948|     1476|        1056|                 52|                272|               10|                 0|                 0|    0|             0|
|2022-01-10    |   151754.5312|     2152|         798|                 53|                282|               16|                47|                 0|    0|             0|
|2022-01-17    |   162042.4542|     1972|        1016|                 35|                387|               25|              1133|                 0|    0|             0|
|2022-01-24    |   158341.6749|     2394|         868|                 48|                318|               23|              2651|                 0|    0|             0|
|2022-01-31    |   165508.2783|     1777|         772|                 42|                461|               23|              3364|                 0|    0|             0|
|2022-02-07    |   191817.3991|     2907|        1030|                 59|                315|               16|               122|                 0|    0|             0|
|2022-02-14    |   216410.3692|     3740|         992|                 35|                599|               13|              2352|                 0|    0|             0|
|2022-02-21    |   226045.3777|     1061|         741|                 29|                443|                8|              3824|                 0|    0|             0|
|2022-02-28    |   202388.6670|     1451|         767|                 32|                268|               22|                37|                 0|    0|             0|
|2022-03-07    |   214064.9777|     2437|        1135|                 30|                281|                8|              3607|                 0|    0|             0|
|2022-03-14    |   181226.6972|     1207|         988|                 25|                200|               10|               693|                 0|    0|             0|
|2022-03-21    |   158027.3208|        0|         848|                 22|                193|                6|              1476|                 0|    0|             0|
|2022-03-28    |    82954.0855|        0|           0|                117|                239|               54|              1930|                 0|    0|             0|
|2022-04-04    |    92734.1551|        0|           0|                230|                974|               75|              3232|                 0|    0|             0|
|2022-04-11    |   -15468.5973|        0|           0|                419|                923|              154|              1098|                 0|    0|             1|
|2022-04-18    |    68595.3219|        0|           0|                471|                827|              185|               909|                 0|    0|             0|
|2022-04-25    |    62788.9801|        0|           0|                530|                873|               90|              3799|                 0|    0|             0|
|2022-05-02    |    53224.8549|        0|           0|                353|               1025|               62|               580|                 0|    0|             0|
|2022-05-09    |    64123.3598|        0|           0|                392|               1028|               62|              1145|                 0|    0|             0|
|2022-05-16    |    95074.6465|     2966|           0|                459|               1241|               69|              1917|                 0|    0|             0|
|2022-05-23    |    21894.3895|     2953|           0|                523|               1139|              130|              1591|                 0|    0|             0|
|2022-05-30    |   107953.0312|        0|           0|                597|                920|              204|              1277|                 0|    0|             0|
|2022-06-06    |    90839.6794|        0|           0|                376|                621|              182|               653|                 0|    0|             0|
|2022-06-13    |    66459.9854|        0|           0|                285|                660|               77|              1697|                 0|    0|             0|
|2022-06-20    |    77533.3599|     2318|           0|                371|                866|               73|              2102|                 0|    0|             0|
|2022-06-27    |   111055.1139|     2858|           0|                482|                889|              157|              3099|                 0|    0|             0|
|2022-07-04    |   107479.4662|      216|           0|                631|               1259|              168|              1425|                 0|    0|             0|
|2022-07-11    |   116259.1303|        0|           0|                344|               1398|              134|              1524|                 0|    0|             0|
|2022-07-18    |   111148.7849|        0|           0|                280|               1488|              224|               448|                 0|    0|             0|
|2022-07-25    |   106784.5914|        0|           0|                164|               1579|              204|              1245|                 0|    0|             0|
|2022-08-01    |   101172.3246|        0|           0|                225|               1063|              149|              2178|                 0|    0|             0|
|2022-08-08    |   106270.9758|        0|           0|                290|               1150|              206|               933|                 0|    0|             0|
|2022-08-15    |   152426.2323|     1962|           0|                299|               1929|              138|              3827|                 0|    0|             0|
|2022-08-22    |   146926.1999|     2563|           0|                249|               2335|              190|              2945|                 0|    0|             0|
|2022-08-29    |   137497.2955|     1910|           0|                333|               2092|              189|               429|                 0|    0|             0|
|2022-09-05    |  1404660.8848|      274|           0|                323|               2147|              293|              1603|                 0|    0|             0|
|2022-09-12    |   112596.4634|        0|           0|                335|               1936|               99|               873|                 0|    0|             0|
|2022-09-19    |   105404.2915|        0|           0|                270|               1977|               98|               113|                 0|    0|             0|
|2022-09-26    |   101552.6966|        0|           0|                419|               1408|               71|              1557|                 0|    0|             0|
|2022-10-03    |   100109.8109|        0|           0|                315|               1285|              241|               257|                 0|    0|             0|
|2022-10-10    |  -512348.6461|        0|           0|                422|               1044|              307|              1209|                 0|    0|             0|
|2022-10-17    |   115023.4828|        0|           0|                422|                872|              183|              2283|                 0|    0|             0|
|2022-10-24    |   106953.7870|        0|           0|                470|               1447|              231|              1835|                 0|    0|             0|
|2022-10-31    |   113115.9649|     2760|           0|                515|               1435|              273|               480|                 0|    0|             0|
|2022-11-07    |   116242.5008|     2823|           0|                749|               1640|              281|               388|                 0|    0|             0|
|2022-11-14    |   134030.0462|     3505|           0|                619|               1204|              136|              3260|                 0|    0|             0|
|2022-11-21    |   177922.2714|     3366|           0|                669|               2115|              178|               196|                 1|    0|             0|
|2022-11-28    |   155644.0150|        0|           0|                812|               1249|              129|              7883|                 0|    0|             0|
|2022-12-05    |   101037.5308|        0|           0|                308|                811|              175|               204|                 0|    0|             0|
|2022-12-12    |    76488.1673|        0|           0|                227|                766|              172|              1425|                 0|    0|             0|
|2022-12-19    |     1548.8188|        0|           0|                192|                606|              171|               362|                 0|    1|             0|
|2022-12-26    |  5219696.1685|     2972|           0|                125|                833|              295|              3684|                 0|    0|             0|
|2023-01-02    | -2011750.0867|        0|           0|                159|               1169|               56|                 0|                 0|    0|             0|
|2023-01-09    |   131694.5242|     2459|           0|                291|                881|               74|               490|                 0|    0|             0|
|2023-01-16    |   100928.4123|        0|           0|                595|                839|               77|               286|                 0|    0|             0|
|2023-01-23    |    96656.5813|     1810|           0|                770|                642|               80|              1120|                 0|    0|             0|
|2023-01-30    |   102721.9009|        0|           0|                770|                354|               78|              2416|                 0|    0|             0|
|2023-02-06    |   114316.1311|        0|           0|               1250|                449|               55|              1342|                 0|    0|             0|
|2023-02-13    |   112108.3273|     2246|           0|               1072|                284|              115|                22|                 0|    0|             0|


 
Set up an mmmr model

```r
## Use the variables above to make an mmmr model. The remainder of the variables will use default values
model <- mmmr(predictors = predictor_vars, saturated = saturation_vars, adstocked = adstocking_vars, dep_col = dependent, date_col = date)
```
 
Train the model

```r
start_time <- Sys.time()
model_fit <- fit.mmmr(object = model, data = data, silent = TRUE, maxiter = 1)
print(glue::glue("Time elapsed: {Sys.time() - start_time}"))
#> Time elapsed: 2.52781085968018
```

Parameters and coefficients of the model:

```r
## "complete" means include coefs that are 0. "params" means include the alpha, gamma, and theta parameters of the fit.
model_results <- coef(model_fit, complete=TRUE, params = TRUE)
model_results %>% knitr::kable()
```



|predictors         |          coef|    alphas|    gammas|    thetas|
|:------------------|-------------:|---------:|---------:|---------:|
|(Intercept)        | -5.816438e+04|        NA|        NA|        NA|
|TV Spend           |  7.469329e+04| 0.8185835| 0.9023566| 0.0193691|
|Radio Spend        |  9.149510e+04| 1.9994234| 0.3002393| 0.2338067|
|Online Video Spend |  0.000000e+00| 2.3311007| 0.3492010|        NA|
|Social Media Spend |  5.260751e+04| 1.4089773| 0.6101861| 0.0035023|
|Search Ads Spend   |  1.369697e+01|        NA|        NA| 0.2898560|
|Direct Mail Spend  |  6.936803e+00|        NA|        NA| 0.4631322|
|black friday sale  |  2.607113e+04|        NA|        NA|        NA|
|xmas               | -5.423722e+04|        NA|        NA|        NA|
|adverse event      | -9.711974e+04|        NA|        NA|        NA|
|yearly             |  8.003503e-01|        NA|        NA|        NA|
|trend              |  1.001315e+00|        NA|        NA|        NA|
|holidays           |  9.075114e-01|        NA|        NA|        NA|


